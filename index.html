<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI News Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.1/css/all.min.css">
    <style>
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f3f4f6;
            --text-primary: #1f2937;
            --text-secondary: #4b5563;
            --border-color: #e5e7eb;
            --card-bg: #ffffff;
            --blue-news: #3b82f6;
            --red-news: #ef4444;
            --purple-news: #8b5cf6;
            --white-news: #f9fafb;
            --slider-bg: #e5e7eb;
            --header-bg: #f9fafb;
            --chat-received: #f3f4f6;
            --chat-sent: #dbeafe;
            --filter-active: #3b82f6;
            --filter-inactive: #9ca3af;
            --countdown-color: #3b82f6;
        }

        body.dark-mode {
            --bg-primary: #111827;
            --bg-secondary: #1f2937;
            --text-primary: #f9fafb;
            --text-secondary: #d1d5db;
            --border-color: #374151;
            --card-bg: #1f2937;
            --header-bg: #111827;
            --chat-received: #374151;
            --chat-sent: #1e3a8a;
            --slider-bg: #4b5563;
            --countdown-color: #60a5fa;
        }

        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .news-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            height: calc(100vh - 180px);
        }

        .chat-bubble {
            position: relative;
            padding: 1rem;
            border-radius: 0.75rem;
            margin-bottom: 1rem;
            max-width: 80%;
            overflow-wrap: break-word;
        }

        .chat-bubble.received {
            background-color: var(--chat-received);
            color: var(--text-primary);
            border-bottom-left-radius: 0;
            margin-right: auto;
        }

        .chat-bubble.sent {
            background-color: var(--chat-sent);
            color: var(--text-primary);
            border-bottom-right-radius: 0;
            margin-left: auto;
        }

        .cartoon-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            overflow-y: auto;
            padding: 1rem;
        }

        .cartoon-item {
            display: flex;
            flex-direction: column;
            background-color: var(--card-bg);
            border-radius: 0.5rem;
            padding: 1rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            border: 1px solid var(--border-color);
        }

        .cartoon-image {
            width: 100px;
            height: 100px;
            margin: 0 auto;
            background-color: #ddd;
            border-radius: 50%;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: #555;
        }

        .speech-bubble {
            position: relative;
            background-color: var(--chat-received);
            border-radius: 0.5rem;
            padding: 0.75rem;
            margin-top: 0.5rem;
            color: var(--text-primary);
        }

        .speech-bubble:after {
            content: '';
            position: absolute;
            top: -0.5rem;
            left: 50%;
            transform: translateX(-50%);
            border-width: 0 0.5rem 0.5rem 0.5rem;
            border-style: solid;
            border-color: transparent transparent var(--chat-received) transparent;
        }

        .filters button {
            border: 2px solid;
            transition: all 0.2s;
            opacity: 0.6;
        }

        .filters button.active {
            opacity: 1;
            transform: translateY(-2px);
        }

        .slider-container {
            width: 100%;
            height: 60px;
            background-color: var(--slider-bg);
            border-radius: 1rem;
            margin: 1rem 0;
            position: relative;
            overflow: hidden;
        }

        .slider-fill {
            position: absolute;
            height: 100%;
            background: linear-gradient(90deg, #3b82f6 0%, #8b5cf6 100%);
            border-radius: 1rem;
            transition: width 0.3s ease;
        }

        .slider-handle {
            position: absolute;
            top: 0;
            width: 10px;
            height: 100%;
            background-color: white;
            border-radius: 5px;
            cursor: pointer;
            z-index: 2;
        }

        .slider-label-people {
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: white;
            font-weight: bold;
            z-index: 1;
        }

        .slider-label-deep {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: white;
            font-weight: bold;
            z-index: 1;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .hidden {
            display: none !important;
        }

        .countdown-container {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--countdown-color);
        }

        .news-feed, .cartoon-feed {
            height: 100%;
            overflow-y: auto;
            padding: 1rem;
            background-color: var(--bg-secondary);
            border-radius: 0.5rem;
        }

        .news-blue { border-left: 4px solid var(--blue-news); }
        .news-red { border-left: 4px solid var(--red-news); }
        .news-purple { border-left: 4px solid var(--purple-news); }
        .news-white { border-left: 4px solid var(--white-news); }

        .btn-blue { border-color: var(--blue-news); color: var(--blue-news); }
        .btn-red { border-color: var(--red-news); color: var(--red-news); }
        .btn-purple { border-color: var(--purple-news); color: var(--purple-news); }
        .btn-white { border-color: var(--white-news); color: var(--text-primary); }

        .btn-blue.active { background-color: var(--blue-news); color: white; }
        .btn-red.active { background-color: var(--red-news); color: white; }
        .btn-purple.active { background-color: var(--purple-news); color: white; }
        .btn-white.active { background-color: var(--white-news); color: var(--text-primary); }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: var(--bg-secondary);
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--text-secondary);
            border-radius: 4px;
        }

        /* Loading animation */
        .loader {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: var(--blue-news);
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 2rem auto;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .dark-mode .loader {
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-left-color: var(--blue-news);
        }
    </style>
</head>
<body>
    <div class="min-h-screen flex flex-col">
        <header class="bg-header sticky top-0 z-10 shadow-sm" style="background-color: var(--header-bg);">
            <div class="container mx-auto px-4 py-4 flex justify-between items-center">
                <h1 class="text-2xl font-bold flex items-center">
                    <i class="fas fa-newspaper mr-2"></i>
                    <span>AI News Dashboard</span>
                </h1>
                <div class="flex items-center space-x-4">
                    <div class="countdown-container">
                        <i class="fas fa-clock"></i>
                        <span id="countdown-timer" class="font-mono text-lg">01:00</span>
                    </div>
                    <button id="dark-mode-toggle" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition">
                        <i class="fas fa-moon dark:hidden"></i>
                        <i class="fas fa-sun hidden dark:inline"></i>
                    </button>
                </div>
            </div>
            
            <div class="container mx-auto px-4 pb-4">
                <div class="tabs flex border-b border-gray-300 dark:border-gray-700">
                    <button class="tab-btn px-4 py-2 font-medium border-b-2 border-blue-500 text-blue-500" data-tab="israel">Israel</button>
                    <button class="tab-btn px-4 py-2 font-medium border-b-2 border-transparent" data-tab="usa">USA</button>
                    <button class="tab-btn px-4 py-2 font-medium border-b-2 border-transparent" data-tab="international">International</button>
                </div>
            </div>
        </header>

        <main class="flex-grow container mx-auto px-4 py-4">
            <div id="israel-tab" class="tab-content active">
                <div class="filters flex space-x-2 mb-4">
                    <button class="btn-blue px-3 py-1 rounded-full text-sm active" data-color="blue">Regular</button>
                    <button class="btn-red px-3 py-1 rounded-full text-sm active" data-color="red">Extraordinary</button>
                    <button class="btn-purple px-3 py-1 rounded-full text-sm active" data-color="purple">Deep State</button>
                    <button class="btn-white px-3 py-1 rounded-full text-sm active" data-color="white">High Officials</button>
                </div>
                
                <div class="slider-container">
                    <div class="slider-fill" style="width: 50%;"></div>
                    <div class="slider-handle" style="left: 50%;"></div>
                    <div class="slider-label-people">People</div>
                    <div class="slider-label-deep">Deep State</div>
                </div>
                
                <div class="news-container">
                    <div class="news-feed" id="israel-news"></div>
                    <div class="cartoon-feed" id="israel-cartoons"></div>
                </div>
            </div>

            <div id="usa-tab" class="tab-content">
                <div class="filters flex space-x-2 mb-4">
                    <button class="btn-blue px-3 py-1 rounded-full text-sm active" data-color="blue">Regular</button>
                    <button class="btn-red px-3 py-1 rounded-full text-sm active" data-color="red">Extraordinary</button>
                    <button class="btn-purple px-3 py-1 rounded-full text-sm active" data-color="purple">Deep State</button>
                    <button class="btn-white px-3 py-1 rounded-full text-sm active" data-color="white">High Officials</button>
                </div>
                
                <div class="slider-container">
                    <div class="slider-fill" style="width: 50%;"></div>
                    <div class="slider-handle" style="left: 50%;"></div>
                    <div class="slider-label-people">People</div>
                    <div class="slider-label-deep">Deep State</div>
                </div>
                
                <div class="news-container">
                    <div class="news-feed" id="usa-news"></div>
                    <div class="cartoon-feed" id="usa-cartoons"></div>
                </div>
            </div>

            <div id="international-tab" class="tab-content">
                <div class="filters flex space-x-2 mb-4">
                    <button class="btn-blue px-3 py-1 rounded-full text-sm active" data-color="blue">Regular</button>
                    <button class="btn-red px-3 py-1 rounded-full text-sm active" data-color="red">Extraordinary</button>
                    <button class="btn-purple px-3 py-1 rounded-full text-sm active" data-color="purple">Deep State</button>
                    <button class="btn-white px-3 py-1 rounded-full text-sm active" data-color="white">High Officials</button>
                </div>
                
                <div class="slider-container">
                    <div class="slider-fill" style="width: 50%;"></div>
                    <div class="slider-handle" style="left: 50%;"></div>
                    <div class="slider-label-people">People</div>
                    <div class="slider-label-deep">Deep State</div>
                </div>
                
                <div class="news-container">
                    <div class="news-feed" id="international-news"></div>
                    <div class="cartoon-feed" id="international-cartoons"></div>
                </div>
            </div>
        </main>

        <footer class="bg-header py-4 text-center text-sm" style="background-color: var(--header-bg);">
            <p>&copy; 2023 AI News Dashboard - Updates every 5 minutes</p>
        </footer>
    </div>

    <script>
        // Global variables
        const API_KEY = '330b7eb40246456dbf18361191ae93be';
        let countdown = 60; // Initial 1 minute countdown (60 seconds)
        let interval = 300; // Subsequent 5 minute intervals (300 seconds)
        let isFirstLoad = true;
        let currentTab = 'israel';
        
        // DOM elements
        const countdownEl = document.getElementById('countdown-timer');
        const darkModeToggle = document.getElementById('dark-mode-toggle');
        const tabButtons = document.querySelectorAll('.tab-btn');
        const tabContents = document.querySelectorAll('.tab-content');
        const filterButtons = document.querySelectorAll('.filters button');
        const sliderHandles = document.querySelectorAll('.slider-handle');
        
        // Initialize the application
        document.addEventListener('DOMContentLoaded', () => {
            // Set up dark mode
            setupDarkMode();
            
            // Set up tab navigation
            setupTabs();
            
            // Set up filter buttons
            setupFilters();
            
            // Set up sliders
            setupSliders();
            
            // Start the countdown
            startCountdown();
            
            // Initial load of news data
            loadAllNews();
        });
        
        // Dark mode setup
        function setupDarkMode() {
            const prefersDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const savedMode = localStorage.getItem('darkMode');
            
            if (savedMode === 'true' || (savedMode === null && prefersDarkMode)) {
                document.body.classList.add('dark-mode');
                document.querySelectorAll('.fa-moon').forEach(icon => icon.classList.add('hidden'));
                document.querySelectorAll('.fa-sun').forEach(icon => icon.classList.remove('hidden'));
            }
            
            darkModeToggle.addEventListener('click', () => {
                document.body.classList.toggle('dark-mode');
                const isDarkMode = document.body.classList.contains('dark-mode');
                localStorage.setItem('darkMode', isDarkMode);
                
                if (isDarkMode) {
                    document.querySelectorAll('.fa-moon').forEach(icon => icon.classList.add('hidden'));
                    document.querySelectorAll('.fa-sun').forEach(icon => icon.classList.remove('hidden'));
                } else {
                    document.querySelectorAll('.fa-moon').forEach(icon => icon.classList.remove('hidden'));
                    document.querySelectorAll('.fa-sun').forEach(icon => icon.classList.add('hidden'));
                }
            });
        }
        
        // Tab navigation setup
        function setupTabs() {
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const tabName = button.getAttribute('data-tab');
                    
                    // Update active tab button
                    tabButtons.forEach(btn => {
                        btn.classList.remove('border-blue-500', 'text-blue-500');
                        btn.classList.add('border-transparent');
                    });
                    button.classList.add('border-blue-500', 'text-blue-500');
                    button.classList.remove('border-transparent');
                    
                    // Update active tab content
                    tabContents.forEach(content => {
                        content.classList.remove('active');
                    });
                    document.getElementById(`${tabName}-tab`).classList.add('active');
                    
                    // Update current tab
                    currentTab = tabName;
                });
            });
        }
        
        // Filter buttons setup
        function setupFilters() {
            filterButtons.forEach(button => {
                button.addEventListener('click', () => {
                    button.classList.toggle('active');
                    const color = button.getAttribute('data-color');
                    const tab = button.closest('.tab-content').id.split('-')[0];
                    
                    // Update visibility of news items
                    updateNewsVisibility(tab, color, button.classList.contains('active'));
                });
            });
        }
        
        // Update visibility of news items based on filter
        function updateNewsVisibility(tab, color, isVisible) {
            const newsItems = document.querySelectorAll(`#${tab}-news .news-${color}`);
            const cartoonItems = document.querySelectorAll(`#${tab}-cartoons .news-${color}`);
            
            newsItems.forEach(item => {
                if (isVisible) {
                    item.classList.remove('hidden');
                } else {
                    item.classList.add('hidden');
                }
            });
            
            cartoonItems.forEach(item => {
                if (isVisible) {
                    item.classList.remove('hidden');
                } else {
                    item.classList.add('hidden');
                }
            });
        }
        
        // Slider setup
        function setupSliders() {
            sliderHandles.forEach(handle => {
                const container = handle.closest('.slider-container');
                const fill = container.querySelector('.slider-fill');
                
                let isDragging = false;
                let startX, startLeft;
                
                // Mouse events
                handle.addEventListener('mousedown', startDrag);
                document.addEventListener('mousemove', drag);
                document.addEventListener('mouseup', endDrag);
                
                // Touch events
                handle.addEventListener('touchstart', startDrag);
                document.addEventListener('touchmove', drag);
                document.addEventListener('touchend', endDrag);
                
                function startDrag(e) {
                    e.preventDefault();
                    isDragging = true;
                    startX = e.clientX || e.touches[0].clientX;
                    startLeft = parseFloat(handle.style.left) || 50;
                }
                
                function drag(e) {
                    if (!isDragging) return;
                    
                    const clientX = e.clientX || (e.touches && e.touches[0].clientX);
                    if (!clientX) return;
                    
                    const containerRect = container.getBoundingClientRect();
                    const containerWidth = containerRect.width;
                    const deltaX = clientX - startX;
                    let newLeft = startLeft + (deltaX / containerWidth * 100);
                    
                    // Constrain to container bounds
                    newLeft = Math.max(0, Math.min(100, newLeft));
                    
                    // Update handle and fill positions
                    handle.style.left = `${newLeft}%`;
                    fill.style.width = `${newLeft}%`;
                }
                
                function endDrag() {
                    isDragging = false;
                }
            });
        }
        
        // Start the countdown timer
        function startCountdown() {
            updateCountdownDisplay();
            
            setInterval(() => {
                countdown--;
                
                if (countdown <= 0) {
                    // Reset countdown to 5 minutes after first load
                    countdown = isFirstLoad ? interval : interval;
                    isFirstLoad = false;
                    
                    // Reload news data
                    loadAllNews();
                }
                
                updateCountdownDisplay();
            }, 1000);
        }
        
        // Update the countdown display
        function updateCountdownDisplay() {
            const minutes = Math.floor(countdown / 60);
            const seconds = countdown % 60;
            countdownEl.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
        
        // Load news for all tabs
        function loadAllNews() {
            loadNews('israel', 'il');
            loadNews('usa', 'us');
            loadNews('international', 'gb');  // Using UK as proxy for international
        }
        
        // Load news for a specific tab
        function loadNews(tab, country) {
            const newsContainer = document.getElementById(`${tab}-news`);
            const cartoonContainer = document.getElementById(`${tab}-cartoons`);
            
            // Clear existing content and show loading indicator
            newsContainer.innerHTML = '<div class="loader"></div>';
            cartoonContainer.innerHTML = '<div class="loader"></div>';
            
            // Fetch news data from NewsAPI
            fetch(`https://newsapi.org/v2/top-headlines?country=${country}&category=general&apiKey=${API_KEY}`)
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`NewsAPI responded with status: ${response.status}`);
                    }
                    return response.json();
                })
                .then(data => {
                    if (data.status === 'error') {
                        throw new Error(data.message || 'Unknown API error');
                    }
                    
                    // Clear loading indicators
                    newsContainer.innerHTML = '';
                    cartoonContainer.innerHTML = '';
                    
                    if (data.articles && data.articles.length > 0) {
                        // Process and display the news
                        processNews(data.articles, tab, newsContainer, cartoonContainer);
                    } else {
                        newsContainer.innerHTML = '<div class="chat-bubble received">No news available at the moment.</div>';
                        cartoonContainer.innerHTML = '<div class="cartoon-item"><div class="cartoon-image">ü§∑</div><div class="speech-bubble">No updates available.</div></div>';
                    }
                })
                .catch(error => {
                    console.error(`Error fetching news for ${tab}:`, error);
                    newsContainer.innerHTML = `<div class="chat-bubble received">Error loading news: ${error.message}</div>`;
                    cartoonContainer.innerHTML = '<div class="cartoon-item"><div class="cartoon-image">‚ö†Ô∏è</div><div class="speech-bubble">Failed to load news updates.</div></div>';
                });
        }
        
        // Process and categorize news articles
        function processNews(articles, tab, newsContainer, cartoonContainer) {
            const newsFragment = document.createDocumentFragment();
            const cartoonFragment = document.createDocumentFragment();
            
            articles.forEach((article, index) => {
                if (!article.title || article.title === '[Removed]' || !article.description) {
                    return;  // Skip articles with missing content
                }
                
                // Categorize the news article
                const category = categorizeNews(article);
                
                // Create chat bubble for news feed
                const chatBubble = document.createElement('div');
                chatBubble.className = `chat-bubble received news-${category}`;
                
                const title = document.createElement('h3');
                title.className = 'font-bold mb-2';
                title.textContent = article.title;
                
                const content = document.createElement('p');
                content.className = 'text-sm';
                content.textContent = article.description;
                
                const source = document.createElement('div');
                source.className = 'text-xs mt-2 opacity-70';
                source.textContent = `Source: ${article.source.name || 'Unknown'}`;
                
                chatBubble.appendChild(title);
                chatBubble.appendChild(content);
                chatBubble.appendChild(source);
                newsFragment.appendChild(chatBubble);
                
                // Create cartoon representation (only for some articles to not overcrowd)
                if (index % 2 === 0) {  // Show cartoon for every other article
                    const cartoonItem = document.createElement('div');
                    cartoonItem.className = `cartoon-item news-${category}`;
                    
                    const cartoonImage = document.createElement('div');
                    cartoonImage.className = 'cartoon-image';
                    
                    // Emoji based on category
                    let emoji = 'üë®‚Äçüíº';  // Default
                    if (category === 'white') emoji = 'üéñÔ∏è';  // High ranking
                    else if (category === 'red') emoji = 'üò≤';  // Extraordinary
                    else if (category === 'purple') emoji = 'üïµÔ∏è';  // Deep state
                    
                    cartoonImage.textContent = emoji;
                    
                    const personName = document.createElement('h4');
                    personName.className = 'text-center font-medium my-2';
                    personName.textContent = extractPersonName(article.title) || 'Politician';
                    
                    const speechBubble = document.createElement('div');
                    speechBubble.className = 'speech-bubble';
                    speechBubble.textContent = generateSpeechBubbleContent(article);
                    
                    cartoonItem.appendChild(cartoonImage);
                    cartoonItem.appendChild(personName);
                    cartoonItem.appendChild(speechBubble);
                    cartoonFragment.appendChild(cartoonItem);
                }
            });
            
            // Append the fragments to the containers
            newsContainer.appendChild(newsFragment);
            cartoonContainer.appendChild(cartoonFragment);
            
            // Apply current filters
            applyCurrentFilters(tab);
        }
        
        // Categorize news based on content
        function categorizeNews(article) {
            const title = article.title.toLowerCase();
            const description = article.description ? article.description.toLowerCase() : '';
            const combined = title + ' ' + description;
            
            // High-ranking politicians (white)
            const highRankingTerms = ['president', 'prime minister', 'chancellor', 'king', 'queen', 'prince', 'princess', 
                                    'biden', 'trump', 'netanyahu', 'sunak', 'modi'];
            if (highRankingTerms.some(term => combined.includes(term))) {
                return 'white';
            }
            
            // Deep state related (purple)
            const deepStateTerms = ['intelligence', 'cia', 'fbi', 'nsa', 'security agency', 'classified', 'surveillance',
                                  'secret service', 'deep state', 'conspiracy', 'mossad', 'espionage', 'spy', 'covert'];
            if (deepStateTerms.some(term => combined.includes(term))) {
                return 'purple';
            }
            
            // Extraordinary or unusual (red)
            const extraordinaryTerms = ['shocking', 'unprecedented', 'crisis', 'scandal', 'controversial', 'breaking',
                                      'urgent', 'emergency', 'disaster', 'violent', 'attack', 'protest', 'riot'];
            if (extraordinaryTerms.some(term => combined.includes(term))) {
                return 'red';
            }
            
            // Regular news (blue) - default
            return 'blue';
        }
        
        // Apply current filter settings to a tab
        function applyCurrentFilters(tab) {
            const filterButtons = document.querySelectorAll(`#${tab}-tab .filters button`);
            
            filterButtons.forEach(button => {
                const color = button.getAttribute('data-color');
                const isActive = button.classList.contains('active');
                updateNewsVisibility(tab, color, isActive);
            });
        }
        
        // Extract a person's name from a headline (simplified version)
        function extractPersonName(title) {
            const commonNames = [
                'Biden', 'Trump', 'Netanyahu', 'Putin', 'Zelensky', 'Sunak', 'Macron', 'Trudeau', 'Scholz',
                'Harris', 'Pelosi', 'McConnell', 'Schumer', 'McCarthy', 'Obama', 'Clinton'
            ];
            
            for (const name of commonNames) {
                if (title.includes(name)) {
                    return name;
                }
            }
            
            return null;
        }
        
        // Generate content for speech bubbles
        function generateSpeechBubbleContent(article) {
            // Extract a relevant snippet from the description
            if (article.description) {
                // Find a quote if available
                const quoteMatch = article.description.match(/"([^"]+)"/);
                if (quoteMatch && quoteMatch[1]) {
                    return quoteMatch[1];
                }
                
                // Otherwise return a shortened version of the description
                const maxLength = 120;
                return article.description.length > maxLength 
                    ? article.description.substring(0, maxLength) + '...' 
                    : article.description;
            }
            
            // Fallback if no description
            return "No statement available.";
        }
    </script>
</body>
</html>
